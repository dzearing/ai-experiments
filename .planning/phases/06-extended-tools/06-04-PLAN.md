---
phase: 06-extended-tools
plan: 04
type: execute
wave: 2
depends_on: ["06-01", "06-02", "06-03"]
files_modified:
  - apps/claude-code-web/client/src/components/TodoWriteDisplay.tsx
  - apps/claude-code-web/client/src/components/TodoWriteDisplay.module.css
  - apps/claude-code-web/client/src/components/ToolResultDisplay.tsx
autonomous: true

must_haves:
  truths:
    - "TodoWrite shows task list with status indicators"
    - "Todo items display their content and status (pending/in_progress/completed)"
    - "Completed todos show visual distinction (strikethrough or checkmark)"
    - "Task list is easily scannable"
  artifacts:
    - path: "apps/claude-code-web/client/src/components/TodoWriteDisplay.tsx"
      provides: "Todo list panel visualization"
      exports: ["TodoWriteDisplay"]
  key_links:
    - from: "ToolResultDisplay.tsx"
      to: "TodoWriteDisplay.tsx"
      via: "switch case for 'TodoWrite' tool"
      pattern: "case 'TodoWrite'"
---

<objective>
TodoWrite task list visualization

Purpose: Users need to see Claude's task tracking with clear status indicators. The TodoWrite tool replaces the entire todo list on each call, so the display should show the complete current state.

Output: TodoWriteDisplay component showing task list panel with status indicators.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-extended-tools/06-RESEARCH.md

@apps/claude-code-web/client/src/components/ToolResultDisplay.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TodoWriteDisplay component</name>
  <files>
    apps/claude-code-web/client/src/components/TodoWriteDisplay.tsx
    apps/claude-code-web/client/src/components/TodoWriteDisplay.module.css
  </files>
  <action>
1. Create TodoWriteDisplay.tsx:
   - Define TodoItem interface:
     ```typescript
     interface TodoItem {
       content: string;
       status: 'pending' | 'in_progress' | 'completed';
       activeForm?: string;  // Additional context
     }
     ```
   - Props interface:
     ```typescript
     interface TodoWriteDisplayProps {
       todos: TodoItem[];
       isExpanded: boolean;
       onToggleExpand: () => void;
     }
     ```
   - Parse todos from input (SDK provides todos array)
   - Header shows "Tasks" or "Todo List" with count
   - Each todo item displays:
     - Status indicator icon (circle for pending, spinner/dot for in_progress, checkmark for completed)
     - Content text
     - Completed items: strikethrough text or muted styling
     - In-progress items: highlight or accent color
   - Collapsed state shows summary: "{X} tasks ({Y} completed)"
   - Expanded state shows full list

2. Create TodoWriteDisplay.module.css:
   - List styling (vertical stack with spacing)
   - Status indicators:
     - Pending: empty circle or outline
     - In progress: filled circle or accent color
     - Completed: checkmark with muted/strikethrough text
   - Use design tokens:
     - --color-success-* for completed
     - --color-info-* for in_progress
     - --color-body-textSoft* for muted text
     - --spacing-* for list items

Status icons (CSS or inline SVG):
- pending: empty circle outline
- in_progress: filled circle (accent color)
- completed: checkmark
  </action>
  <verify>
    - File exists at apps/claude-code-web/client/src/components/TodoWriteDisplay.tsx
    - TypeScript compiles: `cd apps/claude-code-web/client && pnpm tsc --noEmit`
  </verify>
  <done>
    TodoWriteDisplay renders task list with status indicators (pending/in_progress/completed) and summary counts
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate TodoWriteDisplay into ToolResultDisplay and final verification</name>
  <files>
    apps/claude-code-web/client/src/components/ToolResultDisplay.tsx
  </files>
  <action>
1. Import TodoWriteDisplay in ToolResultDisplay.tsx

2. Add case 'TodoWrite':
   - Extract todos array from input
   - Parse todos: input.todos should be Array<TodoItem>
   - Handle case where todos might be undefined or empty
   - Render TodoWriteDisplay with parsed todos

3. Run full build and lint:
   ```bash
   cd apps/claude-code-web/client && pnpm build && pnpm lint
   ```

4. Verify ToolResultDisplay now handles all Phase 6 tools:
   - Write (from 06-01)
   - Edit (from 06-01)
   - Bash (from 06-02)
   - TaskOutput (from 06-02)
   - WebSearch (from 06-03)
   - WebFetch (from 06-03)
   - NotebookEdit (from 06-03)
   - TodoWrite (this plan)

5. Fix any remaining build or lint issues
  </action>
  <verify>
    - Build passes: `cd apps/claude-code-web/client && pnpm build`
    - Lint passes: `cd apps/claude-code-web/client && pnpm lint`
    - ToolResultDisplay switch has case 'TodoWrite'
  </verify>
  <done>
    TodoWrite tool routes to TodoWriteDisplay in ToolResultDisplay; all Phase 6 tools have visualization components
  </done>
</task>

</tasks>

<verification>
1. Build passes: `cd apps/claude-code-web/client && pnpm build`
2. Lint passes: `cd apps/claude-code-web/client && pnpm lint`
3. TodoWrite tool renders TodoWriteDisplay
4. Task list shows status indicators for each item
5. Summary shows count in collapsed state
6. All Phase 6 tools (Write, Edit, Bash, TaskOutput, WebSearch, WebFetch, NotebookEdit, TodoWrite) have display components
</verification>

<success_criteria>
- TodoWrite displays task list with status indicators (pending/in_progress/completed)
- Completed tasks show visual distinction
- Collapsed state shows summary count
- ToolResultDisplay routes TodoWrite to TodoWriteDisplay
- All Phase 6 extended tools are now visualized
- Build and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/06-extended-tools/06-04-SUMMARY.md`
</output>
