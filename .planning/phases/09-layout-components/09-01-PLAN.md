---
phase: 09-layout-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/ui-kit/react/src/styles/z-index.css
  - packages/ui-kit/react/src/index.ts
  - packages/ui-kit/react/src/components/Drawer/Drawer.module.css
  - packages/ui-kit/react/src/components/Dialog/Dialog.module.css
autonomous: true

must_haves:
  truths:
    - "Z-index tokens are available as CSS custom properties"
    - "Existing components using hardcoded z-index values use the new tokens"
    - "Build succeeds with no CSS errors"
  artifacts:
    - path: "packages/ui-kit/react/src/styles/z-index.css"
      provides: "Centralized z-index scale tokens"
      contains: "--z-modal"
    - path: "packages/ui-kit/react/src/index.ts"
      provides: "Export for z-index styles"
      contains: "z-index.css"
  key_links:
    - from: "packages/ui-kit/react/src/components/Drawer/Drawer.module.css"
      to: "packages/ui-kit/react/src/styles/z-index.css"
      via: "var(--z-*) token usage"
      pattern: "var\\(--z-"
---

<objective>
Establish centralized z-index scale tokens for the component library

Purpose: Prevent z-index conflicts between layout components (SidePanel, modals, dropdowns). All components that use z-index will reference these tokens instead of hardcoded values.

Output: z-index.css with token scale, existing components updated to use tokens
</objective>

<execution_context>
@/Users/dzearing/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dzearing/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-layout-components/09-RESEARCH.md
@packages/ui-kit/react/src/components/Drawer/Drawer.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create z-index token scale</name>
  <files>
    packages/ui-kit/react/src/styles/z-index.css
  </files>
  <action>
Create a new CSS file defining the z-index scale as CSS custom properties on :root.

Token scale (as specified in research):
- --z-base: 0 (default, no elevation)
- --z-dropdown: 100 (dropdown menus, select options)
- --z-sticky: 200 (sticky headers, floating elements)
- --z-fixed: 300 (fixed position elements)
- --z-sidebar: 400 (SidePanel in overlay mode)
- --z-modal-backdrop: 500 (modal/dialog backdrop)
- --z-modal: 600 (modal/dialog content)
- --z-popover: 700 (popovers, context menus)
- --z-tooltip: 800 (tooltips)
- --z-toast: 900 (toast notifications)
- --z-max: 9999 (dev tools, emergency UI)

Include a comment header documenting:
- Purpose of the scale
- When to use each level
- Rule: always use tokens, never hardcode z-index values

Create the styles directory if it doesn't exist: packages/ui-kit/react/src/styles/
  </action>
  <verify>
File exists at packages/ui-kit/react/src/styles/z-index.css with all tokens defined.
  </verify>
  <done>
Z-index scale CSS file created with all 11 token levels documented.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update existing components to use z-index tokens</name>
  <files>
    packages/ui-kit/react/src/components/Drawer/Drawer.module.css
    packages/ui-kit/react/src/components/Dialog/Dialog.module.css
  </files>
  <action>
Search for hardcoded z-index values in existing CSS modules and update them to use the new tokens.

Known files to update:
1. Drawer.module.css - currently uses z-index: 1000 for backdrop
   - Change to var(--z-modal-backdrop) for backdrop
   - Change drawer content to var(--z-modal)

2. Dialog.module.css - likely has similar pattern
   - Update backdrop to var(--z-modal-backdrop)
   - Update dialog content to var(--z-modal)

Import the z-index.css at the top of each file if needed, or ensure it's loaded globally.

Note: The token file should be imported once at the package level, not per-component.
  </action>
  <verify>
grep -r "z-index: [0-9]" packages/ui-kit/react/src/components/ should return empty or only intentional inline values.
  </verify>
  <done>
Drawer and Dialog components use z-index tokens instead of hardcoded values.
  </done>
</task>

<task type="auto">
  <name>Task 3: Export z-index styles from package</name>
  <files>
    packages/ui-kit/react/src/index.ts
  </files>
  <action>
Add an import for the z-index.css file in the main index.ts so it's included when the package is imported.

Add near the top with other style imports:
import './styles/z-index.css';

This ensures the CSS custom properties are available globally when any component from the package is used.

Then build the package to verify no CSS parsing errors:
cd packages/ui-kit/react && pnpm build
  </action>
  <verify>
pnpm build in packages/ui-kit/react completes without errors.
CSS variables are present in the built output.
  </verify>
  <done>
Z-index tokens are exported with the package and available to all components.
  </done>
</task>

</tasks>

<verification>
1. File packages/ui-kit/react/src/styles/z-index.css exists with all tokens
2. grep "var(--z-" in Drawer.module.css and Dialog.module.css shows token usage
3. pnpm build succeeds in packages/ui-kit/react
4. Built CSS contains the z-index custom properties
</verification>

<success_criteria>
- Z-index scale established with 11 named tokens
- Existing Drawer and Dialog components migrated to tokens
- Package builds successfully
- No hardcoded z-index values > 10 remain in component CSS
</success_criteria>

<output>
After completion, create `.planning/phases/09-layout-components/09-01-SUMMARY.md`
</output>
