---
phase: 07-core-extensions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/ui-kit/core/src/themes/definitions/copilot.json
autonomous: true

must_haves:
  truths:
    - "Copilot theme appears in theme manifest after build"
    - "Light mode CSS generated with Copilot brand colors"
    - "Dark mode CSS generated with appropriate dark overrides"
  artifacts:
    - path: "packages/ui-kit/core/src/themes/definitions/copilot.json"
      provides: "Copilot theme definition with light/dark colors"
      contains: "copilot"
  key_links:
    - from: "packages/ui-kit/core/src/themes/definitions/copilot.json"
      to: "packages/ui-kit/core/dist/themes/copilot-light.css"
      via: "build-themes.ts generation"
      pattern: "copilot"
---

<objective>
Create the Copilot theme definition file with brand colors for light and dark modes.

Purpose: The Copilot theme provides the foundation for Microsoft Copilot-style UI components, enabling brand consistency across the design system.

Output: A copilot.json theme definition that the existing theme generator compiles into CSS variables.
</objective>

<execution_context>
@/Users/dzearing/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dzearing/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/ui-kit/core/src/themes/definitions/fluent.json
@packages/ui-kit/core/src/themes/definitions/teams.json
@packages/ui-kit/core/src/themes/definitions/default.json
@packages/ui-kit/core/src/themes/schema/theme-rules.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Copilot theme definition</name>
  <files>packages/ui-kit/core/src/themes/definitions/copilot.json</files>
  <action>
Create a new theme definition file `copilot.json` following the established pattern from fluent.json and teams.json.

**Copilot Brand Colors (from Koto design research):**
- Primary: #464FEB (Copilot purple/blue)
- Secondary: #47CFFA (Copilot cyan)
- Accent: #B47CF8 (Copilot violet)
- Neutral: #605e5c (Microsoft neutral gray)

**Structure:**
```json
{
  "id": "copilot",
  "name": "Copilot",
  "description": "Microsoft Copilot brand theme",
  "colors": {
    "primary": "#464FEB",
    "secondary": "#47CFFA",
    "accent": "#B47CF8",
    "neutral": "#605e5c"
  },
  "accessibility": {
    "level": "AA"
  }
}
```

The theme generator will automatically:
- Derive all color group tokens (softer, soft, base, strong, stronger, primary, etc.)
- Generate light mode and dark mode CSS files
- Apply appropriate contrast adjustments for dark mode
- Include the theme in the manifest.json

No overrides section needed - the default derivation rules in theme-rules.json handle light/dark mode automatically from these base colors.
  </action>
  <verify>
Run the build to generate theme CSS:
```bash
cd packages/ui-kit/core && pnpm build
```

Verify outputs exist:
- dist/themes/copilot-light.css
- dist/themes/copilot-dark.css
- dist/themes/manifest.json contains "copilot" entry
  </verify>
  <done>
Copilot theme definition exists with correct brand colors. Theme generator successfully produces light and dark CSS files. Theme appears in manifest.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify theme CSS content</name>
  <files>packages/ui-kit/core/dist/themes/copilot-light.css, packages/ui-kit/core/dist/themes/copilot-dark.css</files>
  <action>
After the build, inspect the generated CSS files to verify correct color derivation.

**Verification checks:**
1. copilot-light.css should contain:
   - `[data-theme='copilot'][data-mode='light']` selector
   - `--primary-bg: #464FEB` (or similar derived from primary)
   - Body text should be dark (#171717 range)
   - Page background should be light (#fafafa range)

2. copilot-dark.css should contain:
   - `[data-theme='copilot'][data-mode='dark']` selector
   - Primary color adjusted for dark mode (lighter variant)
   - Body text should be light (#e5e5e5 range)
   - Page background should be dark (#0f0f0f range)

3. manifest.json should include:
   - Entry with id: "copilot", name: "Copilot"
   - Files pointing to copilot-light.css and copilot-dark.css

If any issues found, fix the theme definition and rebuild.
  </action>
  <verify>
```bash
# Check CSS files exist and have content
ls -la packages/ui-kit/core/dist/themes/copilot-*.css

# Verify primary color is in light CSS
grep -q "464FEB\|464feb" packages/ui-kit/core/dist/themes/copilot-light.css && echo "Primary color found"

# Verify manifest has copilot
grep -q '"copilot"' packages/ui-kit/core/dist/themes/manifest.json && echo "Theme in manifest"
```
  </verify>
  <done>
Generated CSS files contain correct Copilot brand colors. Light mode has appropriate light background/dark text. Dark mode has appropriate dark background/light text. Manifest includes the new theme.
  </done>
</task>

</tasks>

<verification>
1. `packages/ui-kit/core/src/themes/definitions/copilot.json` exists with correct structure
2. `pnpm build` in core package succeeds without errors
3. `dist/themes/copilot-light.css` and `dist/themes/copilot-dark.css` are generated
4. `dist/themes/manifest.json` includes copilot theme entry
5. CSS files contain expected color variables derived from brand colors
</verification>

<success_criteria>
- Copilot theme definition file created following existing theme pattern
- Theme generator successfully compiles theme to CSS
- Both light and dark mode CSS files generated
- Theme appears in manifest for runtime loading
- No build errors or warnings
</success_criteria>

<output>
After completion, create `.planning/phases/07-core-extensions/07-01-SUMMARY.md`
</output>
