---
phase: 03-essential-tools
plan: 03
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - apps/claude-code-web/client/src/components/FileListResult.tsx
  - apps/claude-code-web/client/src/components/FileListResult.module.css
  - apps/claude-code-web/client/src/components/SearchResultsDisplay.tsx
  - apps/claude-code-web/client/src/components/SearchResultsDisplay.module.css
  - apps/claude-code-web/client/src/components/ClickablePath.tsx
  - apps/claude-code-web/client/src/components/ToolResultDisplay.tsx
autonomous: true

must_haves:
  truths:
    - "Glob tool output displays as clickable file list"
    - "Grep tool output displays matches with file, line, and content"
    - "File paths in results are clickable to trigger file view"
    - "Truncation indicator shows when results are limited"
  artifacts:
    - path: "apps/claude-code-web/client/src/components/FileListResult.tsx"
      provides: "Glob tool result visualization"
      exports: ["FileListResult"]
    - path: "apps/claude-code-web/client/src/components/SearchResultsDisplay.tsx"
      provides: "Grep tool result visualization"
      exports: ["SearchResultsDisplay"]
    - path: "apps/claude-code-web/client/src/components/ClickablePath.tsx"
      provides: "Reusable clickable file path button"
      exports: ["ClickablePath"]
  key_links:
    - from: "apps/claude-code-web/client/src/components/FileListResult.tsx"
      to: "apps/claude-code-web/client/src/utils/toolResultTransformers.ts"
      via: "parseGlobOutput import"
      pattern: "import.*parseGlobOutput"
    - from: "apps/claude-code-web/client/src/components/SearchResultsDisplay.tsx"
      to: "apps/claude-code-web/client/src/utils/toolResultTransformers.ts"
      via: "parseGrepOutput import"
      pattern: "import.*parseGrepOutput"
    - from: "apps/claude-code-web/client/src/components/ToolResultDisplay.tsx"
      to: "apps/claude-code-web/client/src/components/FileListResult.tsx"
      via: "Glob case routing"
      pattern: "case 'Glob'"
---

<objective>
Create visualization components for Glob and Grep tool results.

Purpose: When Claude executes Glob or Grep tools, users should see nicely formatted results with clickable file paths. Glob shows file lists, Grep shows search matches with context.

Output: FileListResult for Glob output, SearchResultsDisplay for Grep output, and ClickablePath reusable component for file path interactions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-essential-tools/03-RESEARCH.md

# Dependencies
@.planning/phases/03-essential-tools/03-01-SUMMARY.md

# Utilities created in 03-01
@apps/claude-code-web/client/src/utils/toolResultTransformers.ts

# Existing patterns
@packages/ui-kit/react-chat/src/components/ChatMessage/ChatMessage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ClickablePath reusable component</name>
  <files>apps/claude-code-web/client/src/components/ClickablePath.tsx</files>
  <action>
Create a reusable component for clickable file paths:

```typescript
interface ClickablePathProps {
  path: string;
  lineNumber?: number;
  onClick: (path: string, line?: number) => void;
  className?: string;
}
```

Renders as a button element (not anchor) for accessibility.
Display format: `path` or `path:lineNumber` when line provided.
Styling: Underline on hover, cursor pointer, use --color-body-link token.

No CSS module needed - use inline styles or minimal CSS with design tokens.
  </action>
  <verify>TypeScript compiles: `cd apps/claude-code-web/client && pnpm build`</verify>
  <done>ClickablePath component renders file paths as clickable buttons with optional line number</done>
</task>

<task type="auto">
  <name>Task 2: Create FileListResult for Glob output</name>
  <files>apps/claude-code-web/client/src/components/FileListResult.tsx, apps/claude-code-web/client/src/components/FileListResult.module.css</files>
  <action>
Create component to display Glob tool results:

```typescript
interface FileListResultProps {
  pattern: string;
  output: string;
  isExpanded: boolean;
  onToggleExpand: () => void;
  onFileClick?: (path: string) => void;
}
```

Structure:
1. Header showing pattern + file count + expand/collapse chevron
2. When expanded: List of ClickablePath components for each file
3. If truncated: Show indicator "... and N more files"

Use parseGlobOutput from toolResultTransformers to parse the output.
Import ChevronDownIcon from '@ui-kit/icons/ChevronDownIcon'.

CSS module:
- .fileList - container
- .fileListHeader - header styling
- .fileListItems - scrollable list container (max-height: 300px)
- .fileItem - individual file entry
- .truncationIndicator - styling for "... and N more"
  </action>
  <verify>TypeScript compiles: `cd apps/claude-code-web/client && pnpm build`</verify>
  <done>FileListResult displays Glob output as clickable file list with truncation indicator</done>
</task>

<task type="auto">
  <name>Task 3: Create SearchResultsDisplay for Grep output and update ToolResultDisplay</name>
  <files>apps/claude-code-web/client/src/components/SearchResultsDisplay.tsx, apps/claude-code-web/client/src/components/SearchResultsDisplay.module.css, apps/claude-code-web/client/src/components/ToolResultDisplay.tsx</files>
  <action>
1. Create SearchResultsDisplay component:

```typescript
interface SearchResultsDisplayProps {
  pattern: string;
  output: string;
  isExpanded: boolean;
  onToggleExpand: () => void;
  onFileClick?: (path: string, line?: number) => void;
}
```

Structure:
1. Header showing search pattern + match count + expand/collapse
2. When expanded: List of matches grouped or flat
3. Each match: ClickablePath (file:line) + content preview
4. If truncated: Show indicator

Use parseGrepOutput from toolResultTransformers.
Content preview should be truncated if very long (max 200 chars).

CSS module:
- .searchResults - container
- .searchHeader - header styling
- .matchList - scrollable list (max-height: 400px)
- .matchItem - individual match
- .matchPath - file:line styling
- .matchContent - content preview with monospace font

2. Update ToolResultDisplay.tsx:
- Import FileListResult and SearchResultsDisplay
- Update switch statement:
  - 'Glob' -> FileListResult
  - 'Grep' -> SearchResultsDisplay
  </action>
  <verify>TypeScript compiles: `cd apps/claude-code-web/client && pnpm build`</verify>
  <done>SearchResultsDisplay renders Grep matches, ToolResultDisplay routes all three tools correctly</done>
</task>

</tasks>

<verification>
1. Client builds without TypeScript errors
2. FileListResult parses and displays Glob output
3. SearchResultsDisplay parses and displays Grep output
4. ClickablePath triggers onClick callback with correct arguments
5. ToolResultDisplay routes Read, Glob, and Grep to correct components
</verification>

<success_criteria>
- Glob results display as clickable file list with pattern in header
- Grep results display with file:line links and content preview
- File paths are clickable throughout
- Truncation indicators show when results are limited
- ToolResultDisplay correctly routes all Phase 3 tools
</success_criteria>

<output>
After completion, create `.planning/phases/03-essential-tools/03-03-SUMMARY.md`
</output>
