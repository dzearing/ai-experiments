---
phase: 08-icons
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/ui-kit/react-product-icons/package.json
  - packages/ui-kit/react-product-icons/tsconfig.json
  - packages/ui-kit/react-product-icons/vite.config.ts
  - packages/ui-kit/react-product-icons/src/utils/types.ts
  - packages/ui-kit/react-product-icons/src/utils/createProductIcon.tsx
  - packages/ui-kit/react-product-icons/src/utils/index.ts
  - packages/ui-kit/react-product-icons/scripts/build.ts
  - packages/ui-kit/react-product-icons/scripts/generate-components.ts
  - packages/ui-kit/react-product-icons/scripts/utils.ts
  - packages/ui-kit/react-product-icons/README.md
autonomous: true

must_haves:
  truths:
    - "Package @ui-kit/react-product-icons exists with proper structure"
    - "Build script generates multi-size React components from SVG sources"
    - "Product icons support discrete sizes (16, 24, 32, 48)"
    - "Product icons preserve multi-color fills (not currentColor)"
  artifacts:
    - path: "packages/ui-kit/react-product-icons/package.json"
      provides: "Package configuration with build scripts"
      contains: "@ui-kit/react-product-icons"
    - path: "packages/ui-kit/react-product-icons/src/utils/types.ts"
      provides: "ProductIconProps with size union type"
      contains: "ProductIconProps"
    - path: "packages/ui-kit/react-product-icons/scripts/build.ts"
      provides: "Build orchestration script"
      exports: ["build"]
    - path: "packages/ui-kit/react-product-icons/src/utils/createProductIcon.tsx"
      provides: "Factory for product icon components"
      contains: "createProductIcon"
  key_links:
    - from: "packages/ui-kit/react-product-icons/scripts/build.ts"
      to: "packages/ui-kit/react-product-icons/src/components/"
      via: "generates components from SVG sources"
      pattern: "generateComponents"
---

<objective>
Create the @ui-kit/react-product-icons package structure with build pipeline for multi-color, multi-size product icons.

Purpose: Product icons (Microsoft, agents) require a different approach than UI icons - they use multi-color fills instead of currentColor, and support multiple discrete sizes for pixel-perfect rendering.

Output: New package ready to receive Microsoft and agent icon SVG sources in subsequent plans
</objective>

<execution_context>
@/Users/dzearing/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dzearing/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-icons/08-RESEARCH.md

# Reference existing icons package structure
@packages/ui-kit/icons/package.json
@packages/ui-kit/icons/scripts/build.ts
@packages/ui-kit/icons/scripts/generate-components.ts
@packages/ui-kit/icons/vite.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package structure and configuration</name>
  <files>
    packages/ui-kit/react-product-icons/package.json
    packages/ui-kit/react-product-icons/tsconfig.json
    packages/ui-kit/react-product-icons/vite.config.ts
    packages/ui-kit/react-product-icons/README.md
  </files>
  <action>
    Create the new package directory structure:

    ```
    packages/ui-kit/react-product-icons/
    ├── src/
    │   ├── svgs/
    │   │   ├── microsoft/    # Microsoft product icons (Word, Excel, etc)
    │   │   └── agents/       # Agent icons (Analyst, Researcher, etc)
    │   ├── components/       # Generated (gitignored via .gitignore)
    │   └── utils/
    ├── scripts/
    └── dist/                 # Build output
    ```

    **package.json** - Similar to @ui-kit/icons but:
    - name: "@ui-kit/react-product-icons"
    - description: "Multi-color product icons for Microsoft apps and AI agents"
    - Same devDependencies (esbuild, svgo, tsx, vite, vite-plugin-dts, typescript)
    - peerDependencies: react ^18.0.0 || ^19.0.0
    - Scripts: build, clean, lint, typecheck
    - exports: will be populated by build script (start with ./types and ./package.json)

    **tsconfig.json** - Copy from @ui-kit/icons, adjust paths

    **vite.config.ts** - Copy from @ui-kit/icons, adjust entry points:
    - Entry will be src/components/*.tsx (generated)
    - Output to dist/

    **README.md** - Brief documentation explaining:
    - Purpose: Multi-color product icons with discrete sizes
    - Usage: Individual imports for tree-shaking
    - Available categories: microsoft, agents
    - Size prop accepts 16 | 24 | 32 | 48 (default 24)
  </action>
  <verify>
    ls packages/ui-kit/react-product-icons/
    # Should show: package.json, tsconfig.json, vite.config.ts, README.md, src/, scripts/

    cat packages/ui-kit/react-product-icons/package.json | grep -c "@ui-kit/react-product-icons"
    # Should return 1
  </verify>
  <done>
    Package root files exist with correct configuration
  </done>
</task>

<task type="auto">
  <name>Task 2: Create utility types and component factory</name>
  <files>
    packages/ui-kit/react-product-icons/src/utils/types.ts
    packages/ui-kit/react-product-icons/src/utils/createProductIcon.tsx
    packages/ui-kit/react-product-icons/src/utils/index.ts
  </files>
  <action>
    **types.ts** - Define ProductIconProps:
    ```typescript
    import type { SVGProps } from 'react';

    export interface ProductIconProps extends Omit<SVGProps<SVGSVGElement>, 'viewBox'> {
      /**
       * Icon size in pixels. Product icons support specific sizes
       * for pixel-perfect rendering: 16, 24, 32, 48
       * Non-standard sizes will use the nearest available size.
       * @default 24
       */
      size?: 16 | 24 | 32 | 48 | number;

      /**
       * Accessible title for the icon.
       * When provided, icon is treated as meaningful content (role="img")
       * When omitted, icon is decorative (aria-hidden="true")
       */
      title?: string;
    }

    export interface ProductIconMetadata {
      name: string;
      displayName: string;
      category: 'microsoft' | 'agents';
      keywords: string[];
      componentName: string;
      /** Available sizes for this icon */
      sizes: number[];
    }
    ```

    **createProductIcon.tsx** - Factory function for creating product icon components:
    - Takes sizeMappedContent: Record<number, string> (16, 24, 32, 48 -> SVG content)
    - Returns a forwardRef component that selects appropriate size
    - Handles title/aria-label/aria-hidden properly
    - Uses dangerouslySetInnerHTML to inject SVG content (same as UI icons)

    **index.ts** - Re-export types and createProductIcon
  </action>
  <verify>
    cat packages/ui-kit/react-product-icons/src/utils/types.ts | grep -c "ProductIconProps"
    # Should return > 0

    cat packages/ui-kit/react-product-icons/src/utils/createProductIcon.tsx | grep -c "createProductIcon"
    # Should return > 0
  </verify>
  <done>
    Utility types and createProductIcon factory exist and export correctly
  </done>
</task>

<task type="auto">
  <name>Task 3: Create build scripts</name>
  <files>
    packages/ui-kit/react-product-icons/scripts/build.ts
    packages/ui-kit/react-product-icons/scripts/generate-components.ts
    packages/ui-kit/react-product-icons/scripts/utils.ts
  </files>
  <action>
    **utils.ts** - Shared utilities:
    - pascalCase, titleCase functions (same as UI icons)
    - getSvgFiles - recursively find SVGs in src/svgs/
    - readProductIconFile - read SVG and JSON metadata
    - Colors and log utilities

    **generate-components.ts** - Component generation:
    - Scan src/svgs/{category}/ directories
    - For each icon, read all size variants (icon-16.svg, icon-24.svg, etc)
    - If only one SVG exists (no size suffix), use it for all sizes
    - Generate component using createProductIcon factory
    - Output to src/components/

    **build.ts** - Build orchestration:
    1. Clean dist directory
    2. Generate components from SVGs
    3. Run Vite build for TypeScript
    4. Update package.json exports

    Key difference from UI icons:
    - Product icons may have size-specific SVGs (word-16.svg, word-24.svg)
    - Or a single SVG that scales (analyst.svg)
    - SVG content preserves fill colors (NOT currentColor)
    - SVGO config should NOT remove fill/stroke color values
  </action>
  <verify>
    ls packages/ui-kit/react-product-icons/scripts/
    # Should show: build.ts, generate-components.ts, utils.ts

    cat packages/ui-kit/react-product-icons/scripts/build.ts | grep -c "generateComponents"
    # Should return > 0
  </verify>
  <done>
    Build scripts exist and can be executed with `pnpm build`
  </done>
</task>

</tasks>

<verification>
All verification passes when:
1. Package directory structure exists with correct files
2. package.json has correct name, scripts, and dependencies
3. Types define ProductIconProps with size union
4. createProductIcon factory can generate components
5. Build scripts are runnable (even if no icons exist yet)
6. `cd packages/ui-kit/react-product-icons && pnpm install` succeeds
</verification>

<success_criteria>
- Package @ui-kit/react-product-icons exists at packages/ui-kit/react-product-icons/
- package.json configured with correct name, scripts, peer/dev dependencies
- ProductIconProps interface supports size: 16 | 24 | 32 | 48 | number
- createProductIcon factory function exists and handles size selection
- Build scripts can run (may produce empty output until icons added)
- Package is ready to receive Microsoft and agent icon SVGs
</success_criteria>

<output>
After completion, create `.planning/phases/08-icons/08-02-SUMMARY.md`
</output>
