<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamingText - Better Mockup</title>
    
    <!-- UI Kit Styles -->
    <link rel="stylesheet" href="../../../assets/styles.css">
    
    <!-- Set theme base path for mockups -->
    <script>
        window.__uiKitBasePath = '../../../assets/';
    </script>    
    <!-- Theme Scripts (ES modules) -->
    <script type="module" src="../../../assets/theme.js"></script>
    <script type="module" src="../../../assets/theme-switcher.js"></script>
    
    <style>
        /* Component-specific styles using ui-kit tokens */
        :root {
            /* Component-specific avatar gradient */
            --avatar-gradient-ai: linear-gradient(135deg, var(--color-primary-background) 0%, var(--color-info-background) 100%);
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size);
            line-height: var(--line-height);
            color: var(--color-body-text);
            background: var(--color-body-background);
            padding: var(--spacing-large10);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .demo-section {
            background: var(--color-panel-background);
            border-radius: var(--radius-large10);
            padding: var(--spacing-large10);
            margin-bottom: var(--spacing-large10);
            box-shadow: var(--shadow-card);
        }

        .demo-title {
            font-size: var(--font-size-h4);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing);
            color: var(--color-body-text);
        }

        .demo-description {
            color: var(--color-body-textSoft10);
            margin-bottom: var(--spacing);
            font-size: var(--font-size-small10);
        }

        /* Chat Message Container */
        .chat-message {
            display: flex;
            gap: var(--spacing-small10);
            margin-bottom: var(--spacing);
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--avatar-gradient-ai);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary-text);
            font-weight: var(--font-weight-semibold);
            font-size: var(--font-size-small10);
            flex-shrink: 0;
        }

        .message-content {
            flex: 1;
            background: var(--color-panel-background);
            border-radius: var(--radius);
            padding: var(--spacing);
            position: relative;
        }

        /* StreamingText Component Styles */
        .streaming-text {
            position: relative;
            display: inline;
        }

        .streaming-text__content {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Cursor Styles */
        .cursor {
            display: inline-block;
            animation: blink 1s infinite;
        }

        .cursor--line {
            width: 2px;
            height: 1.2em;
            background: var(--color-primary-background);
            vertical-align: text-bottom;
            margin-left: 1px;
        }

        .cursor--block {
            width: 0.6em;
            height: 1.2em;
            background: var(--color-primary-background);
            opacity: 0.5;
            vertical-align: text-bottom;
            position: relative;
            margin-left: -0.6em;
        }

        .cursor--underscore {
            width: 0.6em;
            height: 2px;
            background: var(--color-primary-background);
            display: inline-block;
            vertical-align: baseline;
            margin-left: 1px;
            transform: translateY(0.9em);
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Code Block Streaming */
        .code-block {
            background: var(--color-panel-background);
            color: var(--color-body-textSoft10);
            padding: var(--spacing);
            border-radius: var(--radius);
            font-family: var(--font-family-mono);
            font-size: var(--font-size-small10);
            margin: var(--spacing-small10) 0;
            overflow-x: auto;
        }

        .code-block .streaming-text__content {
            white-space: pre;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: var(--spacing-small10);
            margin-top: var(--spacing);
            padding-top: var(--spacing);
            border-top: 1px solid var(--color-body-border);
        }

        .btn {
            padding: var(--spacing-small10) var(--spacing);
            background: var(--color-primary-background);
            color: var(--color-primary-text);
            border: none;
            border-radius: var(--radius-button);
            cursor: pointer;
            font-size: var(--font-size-small10);
            font-weight: var(--font-weight-medium);
            transition: background var(--duration-normal);
        }

        .btn:hover {
            background: var(--color-primary-background-hover);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn--secondary {
            background: var(--color-panel-background);
            color: var(--color-body-text);
            border: 1px solid var(--color-body-border);
        }

        .btn--secondary:hover {
            background: var(--color-neutral-background-hover);
        }

        /* Status */
        .status {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-small20);
            color: var(--color-body-textSoft10);
            font-size: var(--font-size-small10);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-primary-background);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }

        /* Examples Grid */
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing);
            margin-top: var(--spacing);
        }

        .example-card {
            background: var(--color-panel-background);
            padding: var(--spacing);
            border-radius: var(--radius);
            border: 1px solid var(--color-body-border);
        }

        .example-label {
            font-weight: var(--font-weight-semibold);
            font-size: var(--font-size-small10);
            color: var(--color-body-textSoft10);
            margin-bottom: var(--spacing-small10);
        }

        /* Markdown Styles */
        .streaming-text h3 {
            margin-top: var(--spacing);
            margin-bottom: var(--spacing-small10);
            font-size: var(--font-size-h5);
        }

        .streaming-text ul {
            margin: var(--spacing-small10) 0;
            padding-left: var(--spacing-large10);
        }

        .streaming-text li {
            margin: var(--spacing-small20) 0;
        }

        .streaming-text strong {
            font-weight: var(--font-weight-semibold);
            color: var(--color-body-text);
        }

        .streaming-text code {
            background: var(--color-panel-background);
            padding: var(--spacing-small20) var(--spacing-small20);
            border-radius: var(--radius-small20);
            font-family: var(--font-family-mono);
            font-size: var(--font-size-small10);
        }

        /* Speed indicator */
        .speed-indicator {
            position: absolute;
            top: var(--spacing-small10);
            right: var(--spacing-small10);
            font-size: var(--font-size-small10);
            color: var(--color-body-textSoft20);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Basic Streaming Example -->
        <div class="demo-section">
            <h2 class="demo-title">Basic Text Streaming</h2>
            <p class="demo-description">Shows text appearing character by character, like ChatGPT or Claude responses</p>
            
            <div class="chat-message">
                <div class="avatar">AI</div>
                <div class="message-content">
                    <div class="streaming-text">
                        <span class="streaming-text__content" id="basic-text">I can help you understand React hooks. The most commonly used hooks are useState for managing component state and useEffect for handling side effects. Would you like me to explain how they work with some examples</span><span class="cursor cursor--line"></span>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="startStreaming('basic-text')">Start Streaming</button>
                <button class="btn btn--secondary" onclick="resetText('basic-text')">Reset</button>
                <span class="status">
                    <span class="status-dot"></span>
                    <span>50ms per character</span>
                </span>
            </div>
        </div>

        <!-- Code Streaming Example -->
        <div class="demo-section">
            <h2 class="demo-title">Code Block Streaming</h2>
            <p class="demo-description">Demonstrates streaming code with syntax highlighting</p>
            
            <div class="chat-message">
                <div class="avatar">AI</div>
                <div class="message-content">
                    <p>Here's an example of a custom React hook:</p>
                    <div class="code-block">
                        <div class="streaming-text">
                            <span class="streaming-text__content" id="code-text">function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue);
  
  const increment = useCallback(() => {
    setCount(prev => prev + 1);
  }, []);
  
  const decrement = useCallback(() => {
    setCount(prev => prev - 1);
  }, []);
  
  return { count, increment, decrement };
}</span><span class="cursor cursor--block"></span>
                        </div>
                    </div>
                    <p style="margin-top: var(--spacing);">This hook encapsulates counter logic that can be reused across components.</p>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="startStreaming('code-text', 30)">Stream Code</button>
                <button class="btn btn--secondary" onclick="resetText('code-text')">Reset</button>
                <span class="status">
                    <span class="status-dot"></span>
                    <span>Simulating code generation</span>
                </span>
            </div>
        </div>

        <!-- Markdown/Rich Text Streaming -->
        <div class="demo-section">
            <h2 class="demo-title">Rich Text / Markdown Streaming</h2>
            <p class="demo-description">Shows formatted text with headers, lists, and emphasis</p>
            
            <div class="chat-message">
                <div class="avatar">AI</div>
                <div class="message-content">
                    <span class="speed-indicator">2.5 tokens/sec</span>
                    <div class="streaming-text" id="markdown-container">
                        <h3>Understanding React Performance</h3>
                        <p>Here are the key concepts for optimizing React applications:</p>
                        <ul>
                            <li><strong>Memoization</strong> - Use <code>React.memo</code> to prevent unnecessary re-renders</li>
                            <li><strong>useMemo Hook</strong> - Cache expensive computations between renders</li>
                            <li><strong>useCallback Hook</strong> - Memoize callback functions to maintain referential equality</li>
                            <li><strong>Code Splitting</strong> - Load components only when needed using <code>React.lazy</code></li>
                        </ul>
                        <p>Each technique serves a specific purpose in your optimization strategy<span class="cursor cursor--line"></span></p>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="streamMarkdown()">Stream Rich Text</button>
                <button class="btn btn--secondary" onclick="resetMarkdown()">Reset</button>
            </div>
        </div>

        <!-- Cursor Style Variations -->
        <div class="demo-section">
            <h2 class="demo-title">Cursor Style Variations</h2>
            <p class="demo-description">Different cursor styles for various contexts</p>
            
            <div class="examples-grid">
                <div class="example-card">
                    <div class="example-label">Line Cursor (Default)</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content">Typing with line cursor</span>
                        <span class="cursor cursor--line"></span>
                    </div>
                </div>
                
                <div class="example-card">
                    <div class="example-label">Block Cursor (Terminal)</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content">Typing with block curso</span>
                        <span class="cursor cursor--block"></span>
                    </div>
                </div>
                
                <div class="example-card">
                    <div class="example-label">Underscore Cursor</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content">Typing with underscore</span>
                        <span class="cursor cursor--underscore"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Streaming States -->
        <div class="demo-section">
            <h2 class="demo-title">Streaming States</h2>
            <p class="demo-description">Different states during the streaming process</p>
            
            <div class="examples-grid">
                <div class="example-card">
                    <div class="example-label">Active Streaming</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content">Currently streaming text...</span>
                        <span class="cursor cursor--line"></span>
                    </div>
                    <div class="status" style="margin-top: var(--spacing-small10);">
                        <span class="status-dot"></span>
                        <span>Generating response</span>
                    </div>
                </div>
                
                <div class="example-card">
                    <div class="example-label">Paused</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content">Streaming paused midway through the</span>
                        <span class="cursor cursor--line" style="animation: none; opacity: 0.5;"></span>
                    </div>
                    <div class="status" style="margin-top: var(--spacing-small10);">
                        <span class="status-dot" style="background: var(--color-warning-background); animation: none;"></span>
                        <span>Paused</span>
                    </div>
                </div>
                
                <div class="example-card">
                    <div class="example-label">Completed</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content">Streaming completed successfully.</span>
                    </div>
                    <div class="status" style="margin-top: var(--spacing-small10);">
                        <span class="status-dot" style="background: var(--color-success-background); animation: none;"></span>
                        <span>Complete</span>
                    </div>
                </div>
                
                <div class="example-card">
                    <div class="example-label">Error State</div>
                    <div class="streaming-text">
                        <span class="streaming-text__content" style="color: var(--color-danger-text);">Stream interrupted: Network err</span>
                        <span class="cursor cursor--line" style="background: var(--color-danger-background);"></span>
                    </div>
                    <div class="status" style="margin-top: var(--spacing-small10);">
                        <span class="status-dot" style="background: var(--color-danger-background); animation: none;"></span>
                        <span style="color: var(--color-danger-text);">Error</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple streaming simulation
        function startStreaming(elementId, speed = 50) {
            const element = document.getElementById(elementId);
            const fullText = element.textContent;
            let index = 0;
            element.textContent = '';
            
            const interval = setInterval(() => {
                if (index < fullText.length) {
                    element.textContent += fullText[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
            }, speed);
        }

        function resetText(elementId) {
            const element = document.getElementById(elementId);
            const texts = {
                'basic-text': 'I can help you understand React hooks. The most commonly used hooks are useState for managing component state and useEffect for handling side effects. Would you like me to explain how they work with some examples',
                'code-text': `function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue);
  
  const increment = useCallback(() => {
    setCount(prev => prev + 1);
  }, []);
  
  const decrement = useCallback(() => {
    setCount(prev => prev - 1);
  }, []);
  
  return { count, increment, decrement };
}`
            };
            element.textContent = texts[elementId] || '';
        }

        function streamMarkdown() {
            // Simplified markdown streaming demo
            const container = document.getElementById('markdown-container');
            container.innerHTML = '<h3>Understanding React Performance</h3>';
            
            setTimeout(() => {
                container.innerHTML += '<p>Here are the key concepts for optimizing React applications:</p>';
            }, 500);
            
            setTimeout(() => {
                container.innerHTML += '<ul><li><strong>Memoization</strong> - Use <code>React.memo</code> to prevent unnecessary re-renders</li></ul>';
            }, 1000);
            
            setTimeout(() => {
                container.querySelector('ul').innerHTML += '<li><strong>useMemo Hook</strong> - Cache expensive computations between renders</li>';
            }, 1500);
        }

        function resetMarkdown() {
            document.getElementById('markdown-container').innerHTML = `
                <h3>Understanding React Performance</h3>
                <p>Here are the key concepts for optimizing React applications:</p>
                <ul>
                    <li><strong>Memoization</strong> - Use <code>React.memo</code> to prevent unnecessary re-renders</li>
                    <li><strong>useMemo Hook</strong> - Cache expensive computations between renders</li>
                    <li><strong>useCallback Hook</strong> - Memoize callback functions to maintain referential equality</li>
                    <li><strong>Code Splitting</strong> - Load components only when needed using <code>React.lazy</code></li>
                </ul>
                <p>Each technique serves a specific purpose in your optimization strategy<span class="cursor cursor--line"></span></p>
            `;
        }
    </script>
</body>
</html>