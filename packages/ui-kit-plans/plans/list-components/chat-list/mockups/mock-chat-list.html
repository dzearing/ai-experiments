<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat List - Clean Implementation</title>
    
    <link rel="stylesheet" href="/assets/styles.css">
    
    <script>
        window.__uiKitBasePath = '/assets/';
    </script>
    
    <script type="module" src="/assets/theme.js"></script>
    <script type="module" src="/assets/theme-switcher.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--color-body-background);
            color: var(--color-body-text);
            font-family: system-ui, -apple-system, sans-serif;
            font-size: var(--font-size);
            line-height: var(--line-height);
            padding: var(--spacing-large20);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Chat Container */
        .chat-container {
            background: var(--color-panel-background);
            border: 1px solid var(--color-panel-border);
            border-radius: var(--radius-container);
            overflow: hidden;
            box-shadow: var(--shadow-card);
        }

        /* Chat Header */
        .chat-header {
            padding: var(--spacing);
            border-bottom: 1px solid var(--color-panel-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--color-panel-background);
        }

        .chat-title {
            font-size: var(--font-size-large20);
            font-weight: var(--font-weight-semibold);
            color: var(--color-body-text);
        }

        .chat-participants {
            font-size: var(--font-size-small10);
            color: var(--color-body-textSoft10);
        }

        /* Messages Area */
        .messages-area {
            height: 500px;
            overflow-y: auto;
            padding: var(--spacing-large10);
            background: var(--color-body-background);
        }

        /* Message Group */
        .message-group {
            margin-bottom: var(--spacing-large20);
        }

        /* Message */
        .message {
            display: flex;
            gap: var(--spacing);
            margin-bottom: var(--spacing-large10);
        }

        .message:last-child {
            margin-bottom: 0;
        }

        /* Avatar */
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-round);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-large10);
            font-weight: var(--font-weight-semibold);
            flex-shrink: 0;
        }

        .avatar.user {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .avatar.assistant {
            background: var(--color-primary-background);
            color: var(--color-primary-text);
        }

        /* Message Content */
        .message-content {
            flex: 1;
            min-width: 0; /* Prevents overflow */
        }

        .message-header {
            display: flex;
            align-items: baseline;
            gap: var(--spacing);
            margin-bottom: var(--spacing-small10);
        }

        .message-author {
            font-weight: var(--font-weight-semibold);
            color: var(--color-body-text);
            font-size: var(--font-size);
        }

        .message-time {
            font-size: var(--font-size-small10);
            color: var(--color-body-textSoft20);
        }

        .message-text {
            color: var(--color-body-text);
            font-size: var(--font-size);
            line-height: var(--line-height-relaxed);
        }

        /* Assistant Message Special Styling */
        .message.assistant .message-bubble {
            background: var(--color-panel-background);
            border: 1px solid var(--color-panel-border);
            border-radius: var(--radius-container);
            padding: var(--spacing);
            margin-top: var(--spacing-small10);
        }

        /* Code Block */
        .code-block {
            background: var(--color-body-background);
            border: 1px solid var(--color-panel-border);
            border-radius: var(--radius-interactive);
            padding: var(--spacing);
            margin-top: var(--spacing-small10);
            font-family: 'SF Mono', Monaco, monospace;
            font-size: var(--font-size-small10);
            line-height: var(--line-height-relaxed);
            overflow-x: auto;
        }

        .code-block code {
            color: var(--color-body-text);
            display: block;
            white-space: pre;
        }

        /* Input Area */
        .input-area {
            padding: var(--spacing);
            border-top: 1px solid var(--color-panel-border);
            background: var(--color-panel-background);
            display: flex;
            gap: var(--spacing);
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: var(--spacing) var(--spacing-large10);
            background: var(--color-body-background);
            border: 1px solid var(--color-input-border);
            border-radius: var(--radius-container);
            font-size: var(--font-size);
            color: var(--color-body-text);
            resize: none;
            min-height: 44px;
            font-family: inherit;
            line-height: var(--line-height);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--color-primary-border);
            box-shadow: 0 0 0 2px var(--color-primary-background) inset;
        }

        .chat-input::placeholder {
            color: var(--color-body-textSoft20);
        }

        .send-button {
            padding: var(--spacing-buttonY) var(--spacing-buttonX);
            background: var(--color-primary-background);
            color: var(--color-primary-text);
            border: none;
            border-radius: var(--radius-interactive);
            font-size: var(--font-size);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all var(--duration-fast10) ease;
            height: 44px;
        }

        .send-button:hover {
            background: var(--color-primary-background-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-button);
        }

        .send-button:active {
            transform: translateY(0);
        }

        /* Demo Variations Section */
        .demo-section {
            margin-top: var(--spacing-section);
        }

        .section-title {
            font-size: var(--font-size-h4);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-large10);
            color: var(--color-body-text);
        }

        .variations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-large10);
        }

        /* Mini Chat Card */
        .mini-chat {
            background: var(--color-panel-background);
            border: 1px solid var(--color-panel-border);
            border-radius: var(--radius-container);
            padding: var(--spacing);
            cursor: pointer;
            transition: all var(--duration-normal) ease;
        }

        .mini-chat:hover {
            border-color: var(--color-primary-border);
            box-shadow: var(--shadow-card);
            transform: translateY(-2px);
        }

        .mini-chat-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-small10);
            margin-bottom: var(--spacing-small10);
        }

        .mini-avatar {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-round);
            background: var(--color-neutral-background);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-small10);
            font-weight: var(--font-weight-semibold);
        }

        .mini-chat-info {
            flex: 1;
            min-width: 0;
        }

        .mini-chat-name {
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size);
            color: var(--color-body-text);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .mini-chat-preview {
            font-size: var(--font-size-small10);
            color: var(--color-body-textSoft10);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .mini-chat-time {
            font-size: var(--font-size-smallest);
            color: var(--color-body-textSoft20);
        }

        .mini-chat-unread {
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--color-primary-background);
            color: var(--color-primary-text);
            width: 20px;
            height: 20px;
            border-radius: var(--radius-round);
            font-size: var(--font-size-smallest);
            font-weight: var(--font-weight-semibold);
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: var(--radius-round);
            margin-left: var(--spacing-small20);
        }

        .status-indicator.online {
            background: var(--color-success-background);
        }

        .status-indicator.away {
            background: var(--color-warning-background);
        }

        .status-indicator.offline {
            background: var(--color-neutral-background);
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: var(--spacing-small20);
            padding: var(--spacing-small10) 0;
            color: var(--color-body-textSoft10);
            font-size: var(--font-size-small10);
            font-style: italic;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 4px;
            height: 4px;
            background: var(--color-body-textSoft20);
            border-radius: var(--radius-round);
            animation: typingPulse 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingPulse {
            0%, 60%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            30% {
                opacity: 1;
                transform: scale(1.3);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Chat Demo -->
        <div class="chat-container">
            <!-- Header -->
            <div class="chat-header">
                <h2 class="chat-title">Chat Demo</h2>
                <span class="chat-participants">3 participants</span>
            </div>

            <!-- Messages -->
            <div class="messages-area">
                <!-- Message 1 -->
                <div class="message">
                    <div class="avatar user">üë§</div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author">Alex Johnson</span>
                            <span class="message-time">10:23 AM</span>
                        </div>
                        <div class="message-text">
                            Hey team! I've been working on the virtualized list component. The performance improvements are looking great - we can now handle thousands of messages smoothly.
                        </div>
                    </div>
                </div>

                <!-- Message 2 (Assistant) -->
                <div class="message assistant">
                    <div class="avatar assistant">ü§ñ</div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author">Assistant</span>
                            <span class="message-time">10:24 AM</span>
                        </div>
                        <div class="message-bubble">
                            <div class="message-text">
                                That's excellent! The virtualization approach with element recycling should provide significant performance benefits. Here's a quick example of the recycling pattern:
                            </div>
                            <div class="code-block">
                                <code>class ComponentRecycler {
  acquire(key) {
    return this.pool.pop() || this.create();
  }
  
  release(component) {
    this.pool.push(this.reset(component));
  }
}</code>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Message 3 -->
                <div class="message">
                    <div class="avatar user">üòä</div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author">Sarah Chen</span>
                            <span class="message-time">10:25 AM</span>
                        </div>
                        <div class="message-text">
                            Looks great! How does it handle dynamic heights? That's been a challenge with other virtualization libraries.
                        </div>
                    </div>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator">
                    <span>Alex is typing</span>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-wrapper">
                    <textarea class="chat-input" placeholder="Type a message..." rows="1"></textarea>
                </div>
                <button class="send-button">Send</button>
            </div>
        </div>

        <!-- Chat List Variations -->
        <div class="demo-section">
            <h2 class="section-title">Chat List Variations</h2>
            
            <div class="variations-grid">
                <!-- Active Chat -->
                <div class="mini-chat">
                    <div class="mini-chat-header">
                        <div class="mini-avatar">TM</div>
                        <div class="mini-chat-info">
                            <div class="mini-chat-name">
                                Team Meeting
                                <span class="status-indicator online"></span>
                            </div>
                            <div class="mini-chat-preview">
                                Discussion about Q4 roadmap...
                            </div>
                        </div>
                        <div>
                            <div class="mini-chat-time">2m ago</div>
                            <div class="mini-chat-unread">3</div>
                        </div>
                    </div>
                </div>

                <!-- Direct Message -->
                <div class="mini-chat">
                    <div class="mini-chat-header">
                        <div class="mini-avatar" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">JD</div>
                        <div class="mini-chat-info">
                            <div class="mini-chat-name">
                                John Doe
                                <span class="status-indicator away"></span>
                            </div>
                            <div class="mini-chat-preview">
                                Thanks for the review!
                            </div>
                        </div>
                        <div>
                            <div class="mini-chat-time">1h ago</div>
                        </div>
                    </div>
                </div>

                <!-- Group Chat -->
                <div class="mini-chat">
                    <div class="mini-chat-header">
                        <div class="mini-avatar" style="background: var(--color-success-background); color: var(--color-success-text);">üé®</div>
                        <div class="mini-chat-info">
                            <div class="mini-chat-name">
                                Design Team
                                <span class="status-indicator offline"></span>
                            </div>
                            <div class="mini-chat-preview">
                                New mockups are ready
                            </div>
                        </div>
                        <div>
                            <div class="mini-chat-time">Yesterday</div>
                        </div>
                    </div>
                </div>

                <!-- Bot Chat -->
                <div class="mini-chat">
                    <div class="mini-chat-header">
                        <div class="mini-avatar" style="background: var(--color-primary-background); color: var(--color-primary-text);">ü§ñ</div>
                        <div class="mini-chat-info">
                            <div class="mini-chat-name">
                                AI Assistant
                                <span class="status-indicator online"></span>
                            </div>
                            <div class="mini-chat-preview">
                                How can I help you today?
                            </div>
                        </div>
                        <div>
                            <div class="mini-chat-time">Now</div>
                            <div class="mini-chat-unread">1</div>
                        </div>
                    </div>
                </div>

                <!-- Archived Chat -->
                <div class="mini-chat" style="opacity: 0.6;">
                    <div class="mini-chat-header">
                        <div class="mini-avatar">üìÅ</div>
                        <div class="mini-chat-info">
                            <div class="mini-chat-name">
                                Project Alpha
                                <span class="status-indicator offline"></span>
                            </div>
                            <div class="mini-chat-preview">
                                [Archived conversation]
                            </div>
                        </div>
                        <div>
                            <div class="mini-chat-time">2 weeks</div>
                        </div>
                    </div>
                </div>

                <!-- Support Chat -->
                <div class="mini-chat">
                    <div class="mini-chat-header">
                        <div class="mini-avatar" style="background: var(--color-warning-background); color: var(--color-warning-text);">üí¨</div>
                        <div class="mini-chat-info">
                            <div class="mini-chat-name">
                                Customer Support
                                <span class="status-indicator online"></span>
                            </div>
                            <div class="mini-chat-preview">
                                Ticket #1234 resolved
                            </div>
                        </div>
                        <div>
                            <div class="mini-chat-time">5m ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Auto-resize textarea
        const textarea = document.querySelector('.chat-input');
        textarea.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Simulate sending message
        document.querySelector('.send-button').addEventListener('click', () => {
            const input = document.querySelector('.chat-input');
            if (input.value.trim()) {
                // Add animation effect
                input.value = '';
                input.style.height = 'auto';
            }
        });

        // Enter to send (Shift+Enter for new line)
        textarea.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                document.querySelector('.send-button').click();
            }
        });
    </script>
</body>
</html>