/* Chat UX Exploration - Shared Styles */

/* ============================================
   MAIN CONTAINER (Shared)
   ============================================ */
.container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background: var(--base-bg);
  color: var(--base-fg);
}

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--base-border);
  background: var(--soft-bg);
}

.headerTitle {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.onlineIndicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #22c55e;
}

.messagesArea {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-4);
}

.messagesContainer {
  max-width: 720px;
  margin: 0 auto;
}

.inputArea {
  padding: var(--space-4);
  border-top: 1px solid var(--base-border);
  background: var(--soft-bg);
}

.inputContainer {
  max-width: 720px;
  margin: 0 auto;
}

/* ============================================
   LAYOUT 1: COMPACT TIMELINE
   Time appears inline, subtle separator between speakers
   ============================================ */
.compactMessage {
  padding: var(--space-2) 0;
}

.compactMessage + .compactMessage[data-same-speaker="false"] {
  margin-top: var(--space-3);
  padding-top: var(--space-3);
  border-top: 1px solid var(--base-border);
}

.compactHeader {
  display: flex;
  align-items: baseline;
  gap: var(--space-2);
  margin-bottom: var(--space-1);
}

.compactSender {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--base-fg);
}

.compactSenderUser {
  color: var(--base-fg-primary);
}

.compactTime {
  font-size: var(--text-xs);
  color: var(--base-fg-softer);
}

.compactContent {
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  color: var(--base-fg);
}

/* ============================================
   LAYOUT 2: MINIMAL EDGE-ALIGNED
   User messages right-aligned, AI left, no bubbles
   ============================================ */
.minimalMessage {
  padding: var(--space-2) 0;
}

.minimalMessageUser {
  text-align: right;
}

.minimalMessageAssistant {
  text-align: left;
}

.minimalContent {
  display: inline-block;
  max-width: 85%;
  text-align: left;
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
}

.minimalContentUser {
  background: var(--primary-bg);
  color: var(--primary-fg);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-lg);
}

.minimalContentAssistant {
  color: var(--base-fg);
}

.minimalTime {
  font-size: var(--text-xs);
  color: var(--base-fg-softer);
  margin-top: var(--space-1);
}

.minimalTimeUser {
  text-align: right;
}

/* ============================================
   LAYOUT 3: SUBTLE EMPHASIS
   User has subtle primary tint, time on hover
   ============================================ */
.subtleMessage {
  position: relative;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-2);
}

.subtleMessageUser {
  background: var(--primary-bg);
  color: var(--primary-fg);
}

.subtleMessageAssistant {
  background: transparent;
  color: var(--base-fg);
}

.subtleContent {
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
}

/* Message toolbar with integrated timestamp */
.messageToolbar {
  position: absolute;
  right: var(--space-2);
  top: var(--space-2);
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 2px;
  padding-left: var(--space-2);
  border-radius: var(--radius-full);
  opacity: 0;
  transition: opacity var(--duration-fast) var(--ease-default);
  backdrop-filter: blur(8px);
}

.messageToolbarUser {
  background: var(--primary-bg-hover);
}

.messageToolbarAssistant {
  background: var(--soft-bg);
  border: 1px solid var(--soft-border);
}

.subtleMessage:hover .messageToolbar,
.groupMessage:hover .messageToolbar {
  opacity: 1;
}

.toolbarTime {
  font-size: var(--text-xs);
  padding-right: var(--space-1);
}

.toolbarTimeUser {
  color: var(--primary-fg);
}

.toolbarTimeAssistant {
  color: var(--base-fg-soft);
}

.toolbarButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  transition: background var(--duration-fast) var(--ease-default);
}

.toolbarButtonUser {
  color: var(--primary-fg);
}

.toolbarButtonUser:hover {
  background: var(--primary-bg);
}

.toolbarButtonAssistant {
  color: var(--soft-fg);
}

.toolbarButtonAssistant:hover {
  background: var(--strong-bg);
}

.toolbarIcon {
  width: 14px;
  height: 14px;
}

/* ============================================
   LOADING STATES
   ============================================ */
.loadingIndicator {
  display: flex;
  gap: var(--space-1);
  padding: var(--space-2) 0;
}

.loadingDot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--base-fg-softer);
  animation: loadingPulse 1.4s infinite ease-in-out both;
}

.loadingDot:nth-child(1) {
  animation-delay: -0.32s;
}

.loadingDot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes loadingPulse {
  0%, 80%, 100% {
    transform: scale(0.6);
    opacity: 0.4;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* ============================================
   MARKDOWN CONTENT OVERRIDES
   ============================================ */
.markdownContent p {
  margin: 0;
}

.markdownContent p + p {
  margin-top: var(--space-3);
}

.markdownContent code {
  font-size: var(--text-sm);
}

.markdownContent pre {
  margin: var(--space-3) 0;
  border-radius: var(--radius-md);
}

/* User message markdown needs to use primary colors */
.userMarkdown {
  color: inherit;
}

.userMarkdown code {
  background: rgba(255, 255, 255, 0.15);
  color: inherit;
}

/* ============================================
   LAYOUT 4: GROUP SUBTLE EMPHASIS
   Multiple participants with colored indicators
   ============================================ */
.groupHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--base-border);
  background: var(--soft-bg);
}

.groupHeaderLeft {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.groupAvatars {
  display: flex;
  align-items: center;
}

.groupAvatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: var(--weight-semibold);
  color: white;
  border: 2px solid var(--soft-bg);
  margin-left: -8px;
}

.groupAvatar:first-child {
  margin-left: 0;
}

.groupMessage {
  position: relative;
  display: flex;
  gap: var(--space-2);
  padding: var(--space-2);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-2);
}

.groupMessageUser {
  background: var(--primary-bg);
  color: var(--primary-fg);
}

.groupMessageOther {
  background: transparent;
  color: var(--base-fg);
}

.groupSenderIndicator {
  flex-shrink: 0;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  font-weight: var(--weight-semibold);
  color: white;
}

.groupMessageBody {
  flex: 1;
  min-width: 0;
}

.groupSenderName {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  margin-bottom: var(--space-1);
  opacity: 0.85;
}

.groupSenderNameUser {
  color: var(--primary-fg-soft);
}

.groupSenderNameOther {
  color: var(--base-fg-soft);
}

.groupContent {
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
}


/* Consecutive messages from same sender - compact mode */
.groupMessage[data-consecutive="true"] .groupSenderIndicator {
  visibility: hidden;
}

.groupMessage[data-consecutive="true"] .groupSenderName {
  display: none;
}

.groupMessage[data-consecutive="true"] {
  margin-top: calc(-1 * var(--space-1));
  padding-top: var(--space-2);
}
