.tabs {
  display: flex;
}

.hasPanel {
  flex-direction: column;
}

.tabList {
  display: flex;
  gap: var(--space-1);
  position: relative;
}

.fullWidth {
  width: 100%;
}

.fullWidth .tab {
  flex: 1;
  justify-content: center;
}

.tab {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border: none;
  background: transparent;
  color: var(--base-fg-soft);
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition:
    color var(--duration-fast) var(--ease-default),
    outline-offset var(--duration-fast) var(--ease-default);
  position: relative;
  white-space: nowrap;
  border-radius: var(--radius-sm);
}

.tabIcon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1em;
}

.tab:hover:not(:disabled) {
  color: var(--base-fg);
}

/* Focus is handled by the animated focus indicator when animated=true */
.animated .tab:focus-visible {
  outline: none;
}

/* Fallback focus ring when not animated */
.tab:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
}

.tab.active {
  color: var(--base-fg);
}

.tab.disabled {
  color: var(--base-fg-softer);
  cursor: not-allowed;
}

/* ==============================================
   Default variant - selection underline only (no divider)
   ============================================== */

/* Non-animated fallback: show individual tab underlines */
.default:not(.animated) .tab {
  position: relative;
}

.default:not(.animated) .tab::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--primary-bg);
  border-radius: 2px;
  transform: scaleX(0);
  transition: transform var(--duration-fast) var(--ease-default);
}

.default:not(.animated) .tab.active::after {
  transform: scaleX(1);
}

/* ==============================================
   Pills variant - background highlight (no indicator)
   ============================================== */

.pills {
  gap: var(--space-2);
}

.pills .tab {
  border-radius: var(--radius-md);
  transition:
    color var(--duration-fast) var(--ease-default),
    background var(--duration-fast) var(--ease-default),
    outline-offset var(--duration-fast) var(--ease-default);
}

.pills .tab:hover:not(:disabled):not(.active) {
  background: var(--base-bg-hover);
}

.pills .tab.active {
  background: var(--primary-bg);
  color: var(--primary-fg);
}

/* ==============================================
   Underline variant - clean underline with animated indicator
   ============================================== */

/* Hide the individual tab underlines when using animated indicator */
.underline.animated .tab::after {
  display: none;
}

/* Non-animated fallback: show individual tab underlines with CSS transition */
.underline:not(.animated) .tab {
  position: relative;
}

.underline:not(.animated) .tab::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--primary-bg, var(--controlPrimary-bg));
  border-radius: 2px;
  box-shadow:
    0 calc(-1 * var(--glow-spread-sm, 4px)) var(--glow-spread-sm, 8px) 0 color-mix(in srgb, var(--glow-color, var(--primary-bg)) var(--glow-opacity, 35%), transparent),
    0 calc(-1 * var(--glow-spread-md, 10px)) var(--glow-spread-md, 20px) 0 color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 35%) * 0.6), transparent),
    0 calc(-1 * var(--glow-spread-lg, 20px)) var(--glow-spread-lg, 40px) 0 color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 35%) * 0.3), transparent);
  transform: scaleX(0);
  transition: transform var(--duration-fast) var(--ease-default);
}

.underline:not(.animated) .tab.active::after {
  transform: scaleX(1);
}

/* ==============================================
   Animated Indicator
   ============================================== */

.indicator {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  background: var(--primary-bg, var(--controlPrimary-bg));
  border-radius: 2px;
  /* Use glow tokens for customizable glow intensity */
  box-shadow:
    0 calc(-1 * var(--glow-spread-sm, 4px)) var(--glow-spread-sm, 8px) 0 color-mix(in srgb, var(--glow-color, var(--primary-bg)) var(--glow-opacity, 35%), transparent),
    0 calc(-1 * var(--glow-spread-md, 10px)) var(--glow-spread-md, 20px) 0 color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 35%) * 0.6), transparent),
    0 calc(-1 * var(--glow-spread-lg, 20px)) var(--glow-spread-lg, 40px) 0 color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 35%) * 0.3), transparent);
  transition: transform var(--duration-normal) var(--ease-default),
    width var(--duration-normal) var(--ease-default);
  pointer-events: none;
  will-change: transform, width;
}

/* Brighter glow in dark mode when no custom glow tokens */
[data-mode="dark"] .indicator,
.dark .indicator {
  box-shadow:
    0 calc(-1 * var(--glow-spread-sm, 5px)) calc(var(--glow-spread-sm, 10px) * 1.25) 2px color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 45%) * 1.3), transparent),
    0 calc(-1 * var(--glow-spread-md, 12px)) calc(var(--glow-spread-md, 24px) * 1.2) 4px color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 45%) * 0.85), transparent),
    0 calc(-1 * var(--glow-spread-lg, 24px)) calc(var(--glow-spread-lg, 48px) * 1.2) 8px color-mix(in srgb, var(--glow-color, var(--primary-bg)) calc(var(--glow-opacity, 45%) * 0.4), transparent);
}

/* Indicator position for default variant */
.default .indicator {
  bottom: 0;
}

/* Indicator position for underline variant */
.underline .indicator {
  bottom: 0;
}

/* ==============================================
   Animated Focus Indicator
   ============================================== */

.focusIndicator {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  border: var(--focus-ring-width, 2px) solid var(--focus-ring);
  border-radius: var(--radius-sm);
  pointer-events: none;
  transition: transform var(--duration-normal) var(--ease-default),
    width var(--duration-normal) var(--ease-default);
  will-change: transform, width;
}

/* Position adjustments for different variants */
.pills .focusIndicator {
  border-radius: var(--radius-md);
}

/* ==============================================
   Tab Panel
   ============================================== */

.tabPanel {
  padding: var(--space-4) 0;
}

/* ==============================================
   Reduced Motion
   ============================================== */

@media (prefers-reduced-motion: reduce) {
  .indicator {
    transition: none;
  }

  .focusIndicator {
    transition: none;
  }

  .tab {
    transition: none;
  }

  .underline:not(.animated) .tab::after {
    transition: none;
  }
}
