.tabs {
  display: flex;
}

.hasPanel {
  flex-direction: column;
}

.tabList {
  display: flex;
  gap: var(--space-1);
  position: relative;
}

.fullWidth {
  width: 100%;
}

.fullWidth .tab {
  flex: 1;
  justify-content: center;
}

.tab {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border: none;
  background: transparent;
  color: var(--base-fg-soft);
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition:
    color var(--duration-fast) var(--ease-default),
    outline-offset var(--duration-fast) var(--ease-default);
  position: relative;
  white-space: nowrap;
  border-radius: var(--radius-sm);
}

.tabIcon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1em;
}

.tab:hover:not(:disabled) {
  color: var(--base-fg);
}

.tab:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
}

.tab.active {
  color: var(--base-fg);
}

.tab.disabled {
  color: var(--base-fg-softer);
  cursor: not-allowed;
}

/* ==============================================
   Default variant - border bottom with animated indicator
   ============================================== */

.default {
  border-bottom: 1px solid var(--base-border);
}

/* Hide the individual tab underlines when using animated indicator */
.default.animated .tab {
  border-bottom: none;
}

/* Non-animated fallback: show individual tab underlines */
.default:not(.animated) .tab {
  border-bottom: 3px solid transparent;
  margin-bottom: -1px;
  border-radius: 0 0 2px 2px;
}

.default:not(.animated) .tab.active {
  border-bottom-color: var(--primary-bg);
}

/* ==============================================
   Pills variant - background highlight (no indicator)
   ============================================== */

.pills {
  gap: var(--space-2);
}

.pills .tab {
  border-radius: var(--radius-md);
  transition:
    color var(--duration-fast) var(--ease-default),
    background var(--duration-fast) var(--ease-default),
    outline-offset var(--duration-fast) var(--ease-default);
}

.pills .tab:hover:not(:disabled):not(.active) {
  background: var(--base-bg-hover);
}

.pills .tab.active {
  background: var(--primary-bg);
  color: var(--primary-fg);
}

/* ==============================================
   Underline variant - clean underline with animated indicator
   ============================================== */

/* Hide the individual tab underlines when using animated indicator */
.underline.animated .tab::after {
  display: none;
}

/* Non-animated fallback: show individual tab underlines with CSS transition */
.underline:not(.animated) .tab {
  position: relative;
}

.underline:not(.animated) .tab::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--primary-bg);
  border-radius: 2px;
  box-shadow:
    0 -4px 8px 0 color-mix(in srgb, var(--primary-bg) light-dark(35%, 60%), transparent),
    0 -10px 20px 0 color-mix(in srgb, var(--primary-bg) light-dark(20%, 40%), transparent),
    0 -20px 40px 0 color-mix(in srgb, var(--primary-bg) light-dark(10%, 25%), transparent);
  transform: scaleX(0);
  transition: transform var(--duration-fast) var(--ease-default);
}

.underline:not(.animated) .tab.active::after {
  transform: scaleX(1);
}

/* ==============================================
   Animated Indicator
   ============================================== */

.indicator {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  background: var(--primary-bg);
  border-radius: 2px;
  box-shadow:
    0 -4px 8px 0 color-mix(in srgb, var(--primary-bg) 35%, transparent),
    0 -10px 20px 0 color-mix(in srgb, var(--primary-bg) 20%, transparent),
    0 -20px 40px 0 color-mix(in srgb, var(--primary-bg) 10%, transparent);
  transition: transform var(--duration-normal) var(--ease-default),
    width var(--duration-normal) var(--ease-default);
  pointer-events: none;
  will-change: transform, width;
}

/* Brighter glow in dark mode */
[data-mode="dark"] .indicator,
.dark .indicator {
  box-shadow:
    0 -4px 10px 2px color-mix(in srgb, var(--primary-bg) 45%, transparent),
    0 -10px 24px 4px color-mix(in srgb, var(--primary-bg) 30%, transparent),
    0 -20px 48px 8px color-mix(in srgb, var(--primary-bg) 15%, transparent);
}

@media (prefers-color-scheme: dark) {
  .indicator {
    box-shadow:
      0 -4px 10px 2px color-mix(in srgb, var(--controlPrimary-bg) 45%, transparent),
      0 -10px 24px 4px color-mix(in srgb, var(--controlPrimary-bg) 30%, transparent),
      0 -20px 48px 8px color-mix(in srgb, var(--controlPrimary-bg) 15%, transparent);
  }
}

/* Indicator position for default variant (on the border) */
.default .indicator {
  bottom: -1px;
}

/* Indicator position for underline variant */
.underline .indicator {
  bottom: 0;
}

/* ==============================================
   Tab Panel
   ============================================== */

.tabPanel {
  padding: var(--space-4) 0;
}

/* ==============================================
   Reduced Motion
   ============================================== */

@media (prefers-reduced-motion: reduce) {
  .indicator {
    transition: none;
  }

  .tab {
    transition: none;
  }

  .underline:not(.animated) .tab::after {
    transition: none;
  }
}
